<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html 
     PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>Class: Tags::DefaultTag</title>
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
  <meta http-equiv="Content-Script-Type" content="text/javascript" />
  <link rel="stylesheet" href="../.././rdoc-style.css" type="text/css" media="screen" />
  <script type="text/javascript">
  // <![CDATA[

  function popupCode( url ) {
    window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
  }

  function toggleCode( id ) {
    if ( document.getElementById )
      elem = document.getElementById( id );
    else if ( document.all )
      elem = eval( "document.all." + id );
    else
      return false;

    elemStyle = elem.style;
    
    if ( elemStyle.display != "block" ) {
      elemStyle.display = "block"
    } else {
      elemStyle.display = "none"
    }

    return true;
  }
  
  // Make codeblocks hidden by default
  document.writeln( "<style type=\"text/css\">div.method-source-code { display: none }</style>" )
  
  // ]]>
  </script>

</head>
<body>



    <div id="classHeader">
        <table class="header-table">
        <tr class="top-aligned-row">
          <td><strong>Class</strong></td>
          <td class="class-name-in-header">Tags::DefaultTag</td>
        </tr>
        <tr class="top-aligned-row">
            <td><strong>In:</strong></td>
            <td>
                <a href="../../files/lib/webgen/plugins/tags/tag_processor_rb.html">
                lib/webgen/plugins/tags/tag_processor.rb
                </a>
        <br />
            </td>
        </tr>

        <tr class="top-aligned-row">
            <td><strong>Parent:</strong></td>
            <td>
                Webgen::Plugin
            </td>
        </tr>
        </table>
    </div>
  <!-- banner header -->

  <div id="bodyContent">



  <div id="contextContent">

    <div id="description">
      <p>
Base class for all tag plugins. The base class provides a default mechanism
for retrieving configuration data from either the configuration file or the
tag itself.
</p>

    </div>


   </div>

    <div id="method-list">
      <h3 class="section-bar">Methods</h3>

      <div class="name-list">
      <a href="#M000115">new</a>&nbsp;&nbsp;
      <a href="#M000123">param</a>&nbsp;&nbsp;
      <a href="#M000116">process_output?</a>&nbsp;&nbsp;
      <a href="#M000124">process_tag</a>&nbsp;&nbsp;
      <a href="#M000119">register_tag</a>&nbsp;&nbsp;
      <a href="#M000118">register_tag</a>&nbsp;&nbsp;
      <a href="#M000122">reset_tag_config</a>&nbsp;&nbsp;
      <a href="#M000117">set_mandatory</a>&nbsp;&nbsp;
      <a href="#M000121">set_tag_config</a>&nbsp;&nbsp;
      <a href="#M000120">tags</a>&nbsp;&nbsp;
      </div>
    </div>

  </div>


    <!-- if includes -->

    <div id="section">





      


    <!-- if method_list -->
    <div id="methods">
      <h3 class="section-bar">Public Class methods</h3>

      <div id="method-M000115" class="method-detail">
        <a name="M000115"></a>

        <div class="method-heading">
          <a href="#M000115" class="method-signature">
          <span class="method-name">new</span><span class="method-args">( plugin_manager )</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000115-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000115-source">
<pre>
     <span class="ruby-comment cmt"># File lib/webgen/plugins/tags/tag_processor.rb, line 153</span>
153:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">initialize</span>( <span class="ruby-identifier">plugin_manager</span> )
154:       <span class="ruby-keyword kw">super</span>
155:       <span class="ruby-ivar">@process_output</span> = <span class="ruby-keyword kw">true</span>
156:       <span class="ruby-ivar">@cur_config</span> = {}
157:       <span class="ruby-ivar">@tags</span> = []
158:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000118" class="method-detail">
        <a name="M000118"></a>

        <div class="method-heading">
          <a href="#M000118" class="method-signature">
          <span class="method-name">register_tag</span><span class="method-args">( tag )</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Register <tt>tag</tt> so that it gets processed by the current class.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000118-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000118-source">
<pre>
     <span class="ruby-comment cmt"># File lib/webgen/plugins/tags/tag_processor.rb, line 179</span>
179:     <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">register_tag</span>( <span class="ruby-identifier">tag</span> )
180:       (<span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">config</span>.<span class="ruby-identifier">infos</span>[<span class="ruby-identifier">:tags</span>] <span class="ruby-operator">||=</span> [] ) <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">tag</span>
181:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000117" class="method-detail">
        <a name="M000117"></a>

        <div class="method-heading">
          <a href="#M000117" class="method-signature">
          <span class="method-name">set_mandatory</span><span class="method-args">( param, default = false )</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Set the parameter <tt><a href="DefaultTag.html#M000123">param</a></tt> as
mandatory. The parameter <tt>default</tt> specifies, if this parameter
should be the default mandatory parameter. If only a String is supplied in
a tag, its value will be assigned to the default mandatory parameter. There
<b>should</b> be only one default mandatory parameter.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000117-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000117-source">
<pre>
     <span class="ruby-comment cmt"># File lib/webgen/plugins/tags/tag_processor.rb, line 169</span>
169:     <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">set_mandatory</span>( <span class="ruby-identifier">param</span>, <span class="ruby-identifier">default</span> = <span class="ruby-keyword kw">false</span> )
170:       <span class="ruby-keyword kw">if</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">config</span>.<span class="ruby-identifier">params</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">||</span> <span class="ruby-operator">!</span><span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">config</span>.<span class="ruby-identifier">params</span>.<span class="ruby-identifier">has_key?</span>( <span class="ruby-identifier">param</span> )
171:         <span class="ruby-identifier">$stderr</span>.<span class="ruby-identifier">puts</span>( <span class="ruby-node">&quot;Cannot set parameter #{param} as mandatory as this parameter does not exist for #{self.name}&quot;</span> ) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">$VERBOSE</span>
172:       <span class="ruby-keyword kw">else</span>
173:         <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">config</span>.<span class="ruby-identifier">params</span>[<span class="ruby-identifier">param</span>].<span class="ruby-identifier">mandatory</span> = <span class="ruby-keyword kw">true</span>
174:         <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">config</span>.<span class="ruby-identifier">params</span>[<span class="ruby-identifier">param</span>].<span class="ruby-identifier">mandatory_default</span> = <span class="ruby-identifier">default</span>
175:       <span class="ruby-keyword kw">end</span>
176:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <h3 class="section-bar">Public Instance methods</h3>

      <div id="method-M000123" class="method-detail">
        <a name="M000123"></a>

        <div class="method-heading">
          <a href="#M000123" class="method-signature">
          <span class="method-name">param</span><span class="method-args">( name, plugin = nil )</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Retrieves the parameter value for <tt>name</tt>. The value is taken from
the current tag if the parameter is specified there or the default value
set in register_config_value is used.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000123-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000123-source">
<pre>
     <span class="ruby-comment cmt"># File lib/webgen/plugins/tags/tag_processor.rb, line 222</span>
222:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">param</span>( <span class="ruby-identifier">name</span>, <span class="ruby-identifier">plugin</span> = <span class="ruby-keyword kw">nil</span> )
223:       <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@cur_config</span>.<span class="ruby-identifier">has_key?</span>( <span class="ruby-identifier">name</span> ) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">plugin</span>.<span class="ruby-identifier">nil?</span>
224:         <span class="ruby-keyword kw">return</span> <span class="ruby-ivar">@cur_config</span>[<span class="ruby-identifier">name</span>]
225:       <span class="ruby-keyword kw">else</span>
226:         <span class="ruby-keyword kw">super</span>( <span class="ruby-identifier">name</span>, <span class="ruby-identifier">plugin</span> )
227:       <span class="ruby-keyword kw">end</span>
228:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000116" class="method-detail">
        <a name="M000116"></a>

        <div class="method-heading">
          <a href="#M000116" class="method-signature">
          <span class="method-name">process_output?</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns <tt>true</tt> if the output should be processed again
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000116-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000116-source">
<pre>
     <span class="ruby-comment cmt"># File lib/webgen/plugins/tags/tag_processor.rb, line 161</span>
161:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">process_output?</span>
162:       <span class="ruby-ivar">@process_output</span>
163:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000124" class="method-detail">
        <a name="M000124"></a>

        <div class="method-heading">
          <a href="#M000124" class="method-signature">
          <span class="method-name">process_tag</span><span class="method-args">( tag, node_chain )</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Default implementation for processing a tag. The parameter <tt>tag</tt>
specifies the name of the tag which should be processed (useful for tag
plugins which process different <a
href="DefaultTag.html#M000120">tags</a>).
</p>
<p>
The <tt>node_chain</tt> parameter holds all relevant nodes. The first node
in the chain is always the node in which the tag was found (a template )and
the last node is the current node, i.e. the page node which triggered all
this. The nodes between are other template nodes.
</p>
<p>
The method has to return the result of the tag processing and, optionally,
a modified chain (as second result). The second value is currently only
returned by the block tag.
</p>
<p>
Has to be overridden by subclasses!!!
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000124-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000124-source">
<pre>
     <span class="ruby-comment cmt"># File lib/webgen/plugins/tags/tag_processor.rb, line 241</span>
241:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">process_tag</span>( <span class="ruby-identifier">tag</span>, <span class="ruby-identifier">node_chain</span> )
242:       <span class="ruby-identifier">raise</span> <span class="ruby-constant">NotImplementedError</span>
243:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000119" class="method-detail">
        <a name="M000119"></a>

        <div class="method-heading">
          <a href="#M000119" class="method-signature">
          <span class="method-name">register_tag</span><span class="method-args">( tag )</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
See <a href="DefaultTag.html#M000118">DefaultTag.register_tag</a>
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000119-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000119-source">
<pre>
     <span class="ruby-comment cmt"># File lib/webgen/plugins/tags/tag_processor.rb, line 184</span>
184:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">register_tag</span>( <span class="ruby-identifier">tag</span> )
185:       <span class="ruby-ivar">@tags</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">tag</span>
186:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000122" class="method-detail">
        <a name="M000122"></a>

        <div class="method-heading">
          <a href="#M000122" class="method-signature">
          <span class="method-name">reset_tag_config</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Resets the tag configuration data.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000122-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000122-source">
<pre>
     <span class="ruby-comment cmt"># File lib/webgen/plugins/tags/tag_processor.rb, line 216</span>
216:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">reset_tag_config</span>
217:       <span class="ruby-ivar">@cur_config</span> = {}
218:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000121" class="method-detail">
        <a name="M000121"></a>

        <div class="method-heading">
          <a href="#M000121" class="method-signature">
          <span class="method-name">set_tag_config</span><span class="method-args">( config, node )</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Set the configuration parameters for the next <a
href="DefaultTag.html#M000124">process_tag</a> call. The configuration, if
specified, is taken from the tag itself.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000121-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000121-source">
<pre>
     <span class="ruby-comment cmt"># File lib/webgen/plugins/tags/tag_processor.rb, line 195</span>
195:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">set_tag_config</span>( <span class="ruby-identifier">config</span>, <span class="ruby-identifier">node</span> )
196:       <span class="ruby-ivar">@cur_config</span> = {}
197:       <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">config</span>
198:       <span class="ruby-keyword kw">when</span> <span class="ruby-constant">Hash</span>
199:         <span class="ruby-identifier">set_cur_config</span>( <span class="ruby-identifier">config</span>, <span class="ruby-identifier">node</span> )
200: 
201:       <span class="ruby-keyword kw">when</span> <span class="ruby-constant">String</span>
202:         <span class="ruby-identifier">set_default_mandatory_param</span>( <span class="ruby-identifier">config</span>, <span class="ruby-identifier">node</span> )
203: 
204:       <span class="ruby-keyword kw">when</span> <span class="ruby-constant">NilClass</span>
205: 
206:       <span class="ruby-keyword kw">else</span>
207:         <span class="ruby-identifier">log</span>(<span class="ruby-identifier">:error</span>) { <span class="ruby-node">&quot;Invalid parameter type (#{config.class}) for tag '#{self.class.plugin_name}' in &lt;#{node.node_info[:src]}&gt;&quot;</span> }
208:       <span class="ruby-keyword kw">end</span>
209: 
210:       <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">all_mandatory_params_set?</span>
211:         <span class="ruby-identifier">log</span>(<span class="ruby-identifier">:error</span>) { <span class="ruby-node">&quot;Not all mandatory parameters for tag '#{self.class.plugin_name}' in &lt;#{node.node_info[:src]}&gt; set&quot;</span> }
212:       <span class="ruby-keyword kw">end</span>
213:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000120" class="method-detail">
        <a name="M000120"></a>

        <div class="method-heading">
          <a href="#M000120" class="method-signature">
          <span class="method-name">tags</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns all registered <a href="DefaultTag.html#M000120">tags</a> for the
plugin.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000120-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000120-source">
<pre>
     <span class="ruby-comment cmt"># File lib/webgen/plugins/tags/tag_processor.rb, line 189</span>
189:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">tags</span>
190:       (<span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">config</span>.<span class="ruby-identifier">infos</span>[<span class="ruby-identifier">:tags</span>] <span class="ruby-operator">||</span> []) <span class="ruby-operator">+</span> <span class="ruby-ivar">@tags</span>
191:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>


    </div>


  </div>


<div id="validator-badges">
  <p><small><a href="http://validator.w3.org/check/referer">[Validate]</a></small></p>
</div>

</body>
</html>